# Zone of Shadows
## Общее описание
  
Это браузерная многопользовательская игра, вдохновлённая игровой вселенной S.T.A.L.K.E.R. Действие происходит в Зоне — опасной территории, полной аномалий, мутантов и сталкеров. Игроки берут на себя роль сталкеров, исследующих локации, взаимодействующих друг с другом и с окружающей средой, сражаясь с врагами и выполняя задания.

### Основные особенности

- **Многопользовательская игра**: Поддержка взаимодействия в реальном времени через Colyseus и асинхронного обмена данными с использованием Redis и NATS.
  
- **Сеттинг**: Мрачная эстетика Зоны с аномалиями, артефактами, мутантами и другими опасностями, реализованная через сцены Phaser.js с гексагональной сеткой.
  
- **Цель**: Выживание, исследование, сбор ресурсов (артефакты, оружие) и выполнение заданий, прокачивание персонажа, торговля, участие в группировках, захват территорий в составе группировки.

- Роли: Основные — администратор, модератор, глава клана, игрок; второстепенные — редактор квестов, забаненный. Управление ролями реализовано через Supabase Auth.

- PVP и PVE: Боевая система поддерживает PvP (игрок против игрока), PvE (игрок против NPC) и PvPvE (смешанные бои). Реализовано через комнаты Colyseus с синхронизацией состояния.

- Общение: Внутриигровой чат, форум-подобный модуль в ПДА, личные сообщения, система SOS и доска объявлений — данные хранятся в Supabase, а обмен происходит через NATS.

- Торговля: Торговля между игроком и npc-торговцем, и между игроками. Можно покупать как за деньги, так и проводить бартер. Как происходит процесс бартера между игроком и торговцем-npc - игрок изначально видит ассортимент товара торговца и может набирать нужные ему товары, а в замен выкладывать свои вещи, игроку нужно добиться одинаковой стоимости вещей или уступить торговцу более дорогую вещь за его товар(+ к репутации); Бартер игрок-игрок - любой игрок может послать запрос на торговлю другому игроку(если нет запрета на запрос, который может установить игрок дабы избежать запросов торговли), если запрос принят, то игрокам даётся возможность выложить свой хабар из инвентаря и пообщаться во внутреннем чате между этими двумя игроками которые ведут торговлю.

- Группировки: В игре есть возможность сплотится в группировку с другими игроками. Каждый клан имеет свою внутреннюю систему со своими правилами и устоями, у одних может быть чёткая иерархия и система званий, а у других все равны и все существуют на равных. Так же у игроков есть возможность создать свою группировку, собрав достаточно ресурсов и желающих вступить.

- Захват и контроль территорий: Так как игра поделена на гексы, у кланов есть возможность захвата этих гексов. Процесс этот не лёгкий и требует сплочённости, ресурсов, достаточного количества людей и своевременной коммуникации внутри клана. В игре можно захватить и удерживать только определённые гексы, некоторые гексы можно удерживать на постоянной основе, а некоторые можно захватить на определённый временной участок. Так же есть нейтральные гексы, которые нельзя захватить. Захваченный гекс может приносить ресурсы если им заниматься и развивать уровень своего присутствия на гексе. Гекс так же может захватить или хотя бы попытаться это сделать другая группировка, для этого есть временные зоны для захвата, к которым группировки с обеих сторон готовятся и накапливают ресурсы для защиты или захвата. Время для возможности захвата - каждые два дня в неделю. Захватить нужно 70% подконтрольной территории, остальные 30% территории остаются за кланом который защищался ещё одни сутки. Сделано это для того, чтобы дать возможность контратаковать и захватить гекс обратно.
  
- Исследование мира: У игроков есть масса возможности разбавить свой досуг разного рода занятиями. Можно отправится на добычу артефактов, можно выполнять квесты, охотится, исследовать лаборатории и неизведанные места, быть киллером, помогать людям, быть проводником, медиком, примкнуть к клану или стать главой собственной группировки, быть торговцем, исследовать аномальные поля, работать на учёных, продавать информацию и многое другое.

- Потребности: У каждого персонажа есть личные потребности в еде, воде, сне, оружии и защитной экипировки, а так же безопасности. У персонажа игрока есть ежедневные потребности в еде, воде и сне. Каждый прожитый час в игре поднимает уровень сонливости, голода и жажды.  
 
- Инвентарь игрока: У каждого игрока при старте есть в личном профиле инвентарь(рюкзак), слоты экипировки, куда он может поместить защитную экипировку(броня, шлем), основное оружие, вспомогательное оружие, пистолет, пояс артефактов, разгрузка(если надета), нож, слот для детектора аномалий и артефактов. В инвентаре, в зависимости от используемого рюкзака, игрок может хранить свой хабар. Каждая вещь имеет вес, из-за этого у игрока есть максимально переносимый вес, при достижении которого он не может двигаться. Максимально переносимый вес зависит от рюкзака и характеристик персонажа.
  
- Характеристики персонажа: Каждый персонаж имеет группу характеристик - Здоровье, Сила, Ловкость, Скрытность, 
  
- Навыки персонажа: Каждый игрок волен прокачивать своего персонажа так как ему хочется. Поэтому в игре есть многообразие доступных к изучению навыков. Они делятся на 2 типа - активные и пассивные. Активные навыки это те что вы активируете самостоятельно, а пассивные активны постоянно. 
# Структура игрового мира

### Локации


- В игре существует несколько уровней (локаций), каждая из которых представляет собой отдельную карту с уникальной темой и набором точек интереса.

- Локации соединены точками перехода, позволяющими игрокам перемещаться между ними.

### Точки перемещения

- Механика передвижения:  
    - Игрок видит локацию, которая поделена на гексы, каждый гекс имеет свои точки интереса, между этими точками есть пути, а сами пути имеют контрольные точки(узлы) по которым передвигаются игроки, перемещаясь от точке к точке.
      
    - Клик по точке инициирует показ возможных вариантов путей. Каждый путь проходит от начальной точки(где находится игрок) до конечной точки(куда кликнул игрок), путь имеет контрольные точки(узлы), которые последовательно нужно пройти в обязательном порядке без возможности как то миновать один или несколько узлов и оказаться сразу на конечной точке. На каждой точке может быть своё событие(встреча с мутантом, аномальная ловушка и тп.). Двигаясь по пути, игрок имеет право вернутся обратно по тем же узлам что и пришёл.
      
    - Перемещение сопровождается затратами времени/энергии, а так же может привести к случайным событиями (например, встреча с мутантом).
  
- Каждая точка уникальна и имеет:  
    - **Название**: Например, "Бар 100 рентген", "Аномалия Жарка", "Свалка" и другие.
      
    - **Тип**: Определяет её функциональность:  
        - **Лагерь сталкеров**: безопасная зона для торговли, отдыха, общения.
        - **Точка перехода**: позволяет переместиться на другую локацию, другой гекс или спуститься в лабораторию.
        - **Обычная точка:** Обычная точка где может быть всё что угодно - от вражеского патруля до аномального поля
        - Аномальное поле: Точка скопления аномалий, тут можно попробовать обнаружить и достать артефакт.
        - Точка группировки: Отдельная категория точек, которыми управляет и контролирует группировка. Тут может быть склад, стрельбище, арсенал, блокпост, штаб и т.п.

## Игровая механика

### Взаимодействие игроков

- Игроки могут:  
    - **Общаться**: через чат или предустановленные команды (например, "Нужна помощь!").
      
    - **Торговать**: обмениваться артефактами, оружием или патронами в лагерях.
      
    - **Сражаться**: PvP возможно в определённых зонах (например, за контроль над точкой с артефактом).
      
    - **Объединяться**: создавать группы для совместного прохождения опасных зон.
    
### Взаимодействие с NPC

- **Дружественные NPC**:  
    - Торговцы в лагерях предлагают покупку/продажу предметов.
      
    - Квестодатели выдают задания (например, "Добудь артефакт из аномалии").
      
- **Враждебные NPC**:  
    - Мутанты (собаки, контроллёры, кровососы) атакуют при приближении к их местам обитания.
      
    - Бандиты или военные сталкеры могут охранять ценные ресурсы или патрулировать отдельные точки.
      
### Боевая система


- Бои с мутантами или NPC происходят при входе в определённые точки или узлы пути.
  
- Механика боя:  
    - Пошаговая мини-игра, с игровым полем разделённым на гексы, размер игрового поля может быть разным и зависит от настроек конкретного боя которые задаёт админ при создании боевого события или же с заранее определёнными размерами. 
    
	- Размеры игрового поля: малое - 20 гексов(1-3 врага), среднее - 35 гексов(4-8 врагов), большое - 60 гексов(9 и более врагов).
      
    - Игрок использует оружие, экипировку и другие предметы из инвентаря которые могут помочь ему в бою.
    
	- На игровом поле есть несколько типов препятствий(забор, ямы, аномалии), случайных событий(появление мутанта или невидимая аномалия), вспомогательных элементов окружения(заборы, автомобили, ящики, платформы с лестницами). Так или иначе игрок может использовать их в своих целях, например, можно залезть на автомобиль чтобы избежать прямого столкновения с мутантом, или заманить мутанта в аномалию встав таким образом чтобы аномалия оказалась между игроком и мутантом, или скрыться в высоких кустах чтобы противник потерял игрока из виду.
	  
	- Каждое действие на поле будь то передвижение, выстрел или перезарядка - тратит определённое количество очков действий(ОД) в зависимости от типа действия.
       
  
- Возможные исходы:  
    - Победа: получение добычи (патроны, артефакты).
      
    - Поражение: потеря здоровья, ресурсов + перемещение в последний безопасный лагерь который посещал игрок.
    
  